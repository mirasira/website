<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous"> -->
    <!-- <link rel="stylesheet" href="static\css\sim.css"> -->
    <script src="https://cdn.plot.ly/plotly-2.12.1.min.js"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="icon" href="https://preview.redd.it/vpt8xffqv3q71.jpg?auto=webp&s=75c366d7794c6134e93a3907650a804c7932ae3a">
    <title>Lul</title>
    <style type = "text/css">
        canvas {
            background: white;
        }
        body{
            margin: 0;
        }
    </style>
    <link rel="stylesheet" href="static/css/PendulumTheory.css">
</head>
<body>
    <h1>Simulating mass-spring-damper system with lagrangian mechanics</h1>
    Becouse of damping term, Lagrangian equation looks like this:
    <br>
    \(\frac{d}{dt}\frac{\partial \mathcal{L}}{\partial \dot{x}}-\frac{\partial \mathcal{L}}{\partial x} = - \frac{\partial D}{\partial \dot{x}}\)
    <br>
    Potential energy of the mass is given by \( V = -m g h \)<br>
    Potential energy of the spring is given by \( V = \frac{1}{2} k x^2 \)<br>
    Kinetic energy of the mass is given by \( T = \frac{1}{2} m \dot{x}^2 \)<br>
    Energy disipated by the damper is given by \( D = \frac{1}{2} b \dot{x}^2 \)<br>
    \( \mathcal{L} = T-V = \frac{1}{2} m \dot{x}^2 + m g h - \frac{1}{2} k x^2\)
    <br>

    Lagrange equation is then: <br>
    \(m\ddot{x}-mg+kx = -b \dot{x}\)<br>
    Rearanging a bit:<br>
    \(\ddot{x} = \frac{mg-kx-b\dot{x}}{m}\), substituting \(\dot{x} = v\) we get differential equations:<br>
    \(\begin{aligned} \dot{x} &= v \\ \dot{v} &= \frac{mg-kx-bv}{m} \end{aligned}\), 

    where \(m\) is mass, \(k\) is spring stifness, \(b\) is damper stifness, \(g\) is gravity and \(x\) is position of the mass.


    <br>
    <br>
    <br>
    <div class="gridtest">
        <div class="canvas">
            <canvas class="Canavas1" id="myCanvas" ></canvas>
        </div>
        <div class="subgrid">
            <div id="inline">Mass (m) \([ kg ]\)</div>
            <div id="inline">Spring stifness (k) \([ kg \cdot m\cdot s^{-2} ]\)</div>
            <div id="inline">Damper stifness (b) \([ kg \cdot s^{-1} ]\)</div>
            <div id="inline">Gravity (g) \([ m \cdot s^{-2} ]\)</div>
        </div>
        <div class="subgrid">
            <div class="slidecontainer">
                <input type="range" min="1" max="100" value="50" step="0.1" class="mass" id="mass">
                <label for="mass">Mass</label><br>
            </div>
            <div class="slidecontainer">
                <input type="range" min="0" max="10" value="1" step="0.1" class="slider" id="SpringStifness">
                <label for="SpringStifness">Spring stifness</label><br>
            </div>
            <div class="slidecontainer">
                <input type="range" min="0" max="10" value="1" step="0.1" class="slider" id="DamperStifness">
                <label for="DamperStifness">Damper stifness</label><br>
            </div>
            <div class="slidecontainer">
                <input type="range" min="0" max="100" value="9.81" step="0.01" class="slider" id="Gravity">
                <label for="Gravity">Gravity</label><br>
            </div>
        </div>
        <div class="subgrid">
            <div class="textcontainer">
                <input type="number" id="massNumber" name="Name" placeholder="1">
            </div>
            <div class="textcontainer">
                <input type="number" id="SpringStifnessNumber" name="Name" placeholder="1">
            </div>
            <div class="textcontainer">
                <input type="number" id="DamperStifnessNumber" name="Name" placeholder="1">
            </div>
            <div class="textcontainer">
                <input type="number" id="GravityNumber" name="Name" placeholder="1">
            </div>
        </div>
        
    </div>

    
    <script src="static/js/MassSpringDamper.js"></script>
</body>
</html>